---
layout: page
title: "モデル"
description: ""
group: manual
---
{% include JB/setup %}

モデルは MMD で利用される PMD または PMX 形式で読み込み可能なファイルのことです。PMX 形式のモデルは現在完全に対応出来ているわけではなく、いくつか未実装があります。例えば SDEF 変形には対応せず、BDEF2 変形にフォールバックします。

1. モデルの読み込み方法
-----------------------

モデルの追加方法は６つあります。

 * 1. ツールバーの「モデル/モーション追加」でファイルの種類を「モデルファイル」にしてファイルを指定する
 * 2. ウィンドウ上部の「モデルを追加」からモデルのファイルを指定する
 * 3. メニューから「ファイル」の「モデルを追加」からモデルのファイルを指定する
 * 4. 右側の描画ウィンドウを右クリックし、「モデルを追加」からモデルのファイルを指定する
 * 5. アプリケーションのウィンドウにモデルのファイルに直接ドラッグ・アンド・ドロップする
 * 6. アプリケーションのアイコンにモデルのファイルを直接ドラッグ・アンド・ドロップする

モデルを読み込むとモデルの説明のダイアログが表示され、「OK」で実際にモデルが読み込まれます。「キャンセル」でモデルの読み込みを行わず、描画もされません。モデルが読み込まれると左上の情報パネルの「Model:」にモデル名が表示され、センターボーンが指定されます。

0\.20\.0 から zip 形式のファイルの読み込みに対応しています。注意点として zip ひとつにつきひとつのモデルしか読みこむことが出来ません。そのため、複数のモデルがある場合は最初のモデルが読み込まれます。複数のモデルを読みこませる場合は一度解凍して pmd/pmx で読み込ませてください。

0\.28\.2 からは zip 読み込み時に README を表示し、それに同意しないと読み込ませない仕様に変更しました。README に相当するドキュメントがない場合は読みこむことができません。

2. モデルの操作
---------------

モデルの操作は主に３つの方法があります。いずれも予めモデルを選択する必要があります。

 * 1. 右下のスクリーンハンドルから操作
 * 2. モデルに表示される回転ハンドルまたは移動ハンドルから操作
 * 3. モデルタブを選択してモーフタブからモーフスライダーを操作

前者２つはボーン、後者はモーフを操作する方法で、これらを使ってモデルを動かしていきます。モーフは「モーフ」の項目で解説します。

### 2.1 場面右下のスクリーンハンドル

スクリーンハンドルは上から Global/Local/View の文字表示、回転を示すマークを含んだ X/Y/Z のハンドル、移動を示すマークを含んだ X/Y/Z のハンドルの７つで構成されます。Global/Local/View の文字表示はマウスカーソルをあててクリックすることによって切り替えることが出来ます。クリックすると Local => Global => View => Local の順で切り替えることができます。

X/Y/Z のハンドルはマウスカーソルをあてて上下にドラッグすることによってボーン動かすことができます。X/Y/Z のハンドルは操作可能である場合はそれぞれ赤、緑、青で色付けされます。灰色で表示されている場合はそのハンドルから操作することが出来ません。

#### 2.1.1 Global

ボーン及びカメラの状態に依存しない絶対基準の移動及び回転を行います。ボーンダイアログでの数値指定もグローバル基準で行います。

#### 2.1.2 Local

ボーンの変形状態に基づいた相対基準の移動及び回転を行います。ただし、モデル及びボーンによっては特有のローカル軸を元に変形します。

 * PMD ではボーン名に「指」「ひじ」「腕」「手首」がはいる場合は親ボーンを基準にしたローカル軸が自動的に作成され、それを元に変形します。
 * PMX ではボーンにローカル軸が有効な場合はボーンに設定されたローカル軸を元に変形します。

#### 2.1.3 View

現在のカメラ視点に基づいた移動及び回転を行います。

### 2.2 回転ハンドルと移動ハンドル

「タイムライン」の「ボーン」の下にある「選択」、「回転」、「移動」のうち「回転」をクリックすると選択されたボーンに回転ハンドルが、同様に「移動」をクリックすると選択されたボーンに移動ハンドルがそれぞれ表示されます。

回転ハンドルは３つのドーナツで表示され、なぞるようにドラッグするとボーンを回転することができます。移動ハンドルは軸と矢印で表示され、矢印をドラッグすることで指定方向にボーンを移動することができます。

回転及び移動ハンドルはボーンが移動可能な場合は中央に水色の球体が表示され、それをドラッグすることによってボーンをカメラ視点に基づいて任意に移動することができます。使用する際はカメラのプリセットを用いて動かすことを推奨します。

3. モデルメニューからの操作
---------------------------

モデルの操作は上記以外にメニューの「モデル」からモデルの選択及びモデルの位置を変えることができます。ただしこちらの方法は情報がプロジェクトに保存されるにとどまり、モーションには含まれません。

以下のモデルの位置と回転の設定はキーフレームとは独立して設定されます。モデルの位置及び回転はプロジェクトに保存されます。

### 3.1 モデルを選択

プロジェクト内にあるモデルをの一覧からモデルを選択します。選択されたモデルは右側のウィンドウの左上の「Model:」に選択されたモデル名が表示されます。

### 3.2 次のモデルを選択

現在選択されているモデルの次のモデルを選択します。現在選択されているモデルが最後の場合、最初のモデルが選択されます。「モデルを選択」で現在のモデルのすぐ下(または最初)を選択することと同じです。

### 3.3 前のモデルを選択

現在選択されているモデルの前のモデルを選択します。現在選択されているモデルが最初の場合、最後のモデルが選択されます。「モデルを選択」で現在のモデルのすぐ上(または最後)を選択することと同じです。

### 3.4 選択されたモデルを上に移動

現在選択されているモデルを移動量 1.0 固定で Y 軸にそって上に移動します。これによって処理されたモデル位置はキーフレームとは独立して設定されます。

### 3.5 選択されたモデルを下に移動

現在選択されているモデルを移動量 1.0 固定で Y 軸にそって下に移動します。これによって処理されたモデル位置はキーフレームとは独立して設定されます。

### 3.6 選択されたモデルを左に移動

現在選択されているモデルを移動量 1.0 固定で X 軸にそって左に移動します。これによって処理されたモデル位置はキーフレームとは独立して設定されます。

### 3.7 選択されたモデルを右に移動

現在選択されているモデルを移動量 1.0 固定で X 軸にそって右に移動します。これによって処理されたモデル位置はキーフレームとは独立して設定されます。

### 3.8 モデルの位置を戻す

現在選択されているモデルを初期状態の位置 (X=0.0, Y=0.0, Z=0.0) に戻します。これによって処理されたモデル位置はキーフレームとは独立して設定されます。

4. モデルの削除
---------------

現在選択されているモデルを削除します。削除前にダイアログを表示して OK で削除します。キャンセルした場合モデルは削除されません。削除するとひもづけられているモーションのキーフレーム操作の巻き戻しが出来なくなります。

5. モデルタブ
-------------

ウィンドウ左側の下のタブにある「モデル」は「情報」、「設定」、「モーフ」のタブがあります。

### 5.1 情報

情報は読み込まれた情報のモデルの情報を表示とエッジ幅及び色、投影影の設定が出来ます。モデルの情報は以下の情報が表示されます。モデルが選択されていない、またはモデルが何もない場合は名前とコメントが「N/A」に、それ以外は 0 に設定されます。

 * 1. 名前
 * 2. コメント
 * 3. 頂点数
 * 4. インデックス数
 * 5. 材質マテリアル数
 * 6. ボーン数
 * 7\. IK 数
 * 8. モーフ数 (頂点モーフ)
 * 9. 剛体数
 * 10. ジョイント(拘束条件)数

### 5.2 設定

個々のモデルに適用される設定を行います。設定はプロジェクトファイルに保存されます。

#### 5.2.1 不透明度

モデルの不透明度を設定することが出来ます。百分率で決定され、100 にするとモデルが完全に表示され、0 にするとモデルが完全に透明になり、非表示扱いになります。50 で MMD における半透明表示に相当する表示を行います。

#### 5.2.2 エッジ幅

モデルのエッジ幅を設定することが出来ます。0.0 から 2.0 の間で設定することが出来ます。0.0 にするとエッジを一切描画しなくなるため、わずかに描画負荷が軽くなります。エッジ幅の設定はプロジェクトに保存されます。

#### 5.2.3 影設定

個々のモデルの影設定はプロジェクトに保存されます。デフォルトでは影表示は無効です。

##### 5.2.3.1 影を無効にする

影の表示を無効にします。描画負荷が下がります。

##### 5.2.3.2 投影影を有効にする

投影影を表示します。簡易的な影を表示しますが、若干描画負荷が上がります。

##### 5.2.3.3 セルフシャドウを有効にする

セルフシャドウを表示します。よりディティールな影を表示しますが、それなりに描画負荷が上がります。

#### 5.2.4 位置

モデルの絶対位置を設定します。モーションはこの位置を加算して処理されます。

#### 5.2.5 回転

モデルの回転量を設定します。モーションはこの回転量を結合して処理されます。

### 5.3 モーフ

モーフはモデルの頂点モーフ(または表情とも呼ばれる)を操作します。PMD では頂点モーフのみですが、PMX ではそれ以外にボーン、材質、グループ、拡張頂点モーフが存在します。モーフは４つのカテゴリに分かれて操作します

0\.26\.0 からはモーフのタイムラインの下にスライダーがあり、それを使って選択中のモーフの値を変更することが可能です。また、左上に現在選択されているモーフ名が表示されます。

 * 1\. 目 (Eye)
 * 2\. 口唇 (Lip)
 * 3\. 眉毛 (Eyeblow)
 * 4\. その他 (Other)

スライダーでモーフの値を変更することにより、モデルの頂点がそれに合わせて変化します。「登録」で現在のフレーム位置にキーフレームが登録されます。「登録」を忘れるとフレームの位置変更によってそれまで設定したモーフの値が破棄されるため、注意が必要です。

#### 5.3.1 全てのモーフをリセット

モデル内の全てのモーフをリセットします。

