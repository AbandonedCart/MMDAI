---
layout: page
title: "モーション"
description: ""
group: manual
---
{% include JB/setup %}

モーションは MMD で使用される VMD 形式またはその互換である MMM (MikuMikuMoving) で使用される MVD 形式で読み込み可能なファイルのことです。モーションは場面またはモデルに対して用いられ、以下の５つに分けられます。

 * 1. ボーン
 * 2. モーフ
 * 3. カメラ
 * 4. 照明
 * 5. セルフシャドウ
 
このうち対応しているのはボーンとモーフとカメラです。照明は現在内部的に利用可能にとどまり、セルフシャドウは対応していません。ボーンとモーフはモデルに対して、カメラと照明は場面に対して用いられます。

0\.25\.0 から MikuMikuMoving が新しいモーション形式として採用している MVD 形式の読み込み及び書き出しに試験的に対応しています。こちらは以下の要素を読み込みます。

 * 1. ボーン
 * 2. モーフ
 * 3. カメラ

新規作成は現状 MVD ではなく VMD しか出来ません（出力では MVD の選択が可能だが基本的に VMD 形式と同じデータが出力される）。その際ボーン及びカメラのレイヤーは 0 番目しか書き込まれず、モーフの補間設定は無視され線形補間として出力されます。

1. モーションを新しく作る方法
-----------------------------

ツールバーまたはメニューから「ファイル」の「新規モーション」で新しくモーションを作成することができます。変更点がある場合「変更しますか」のダイアログが出ます。最初に立ち上げた状態は常に新規にモーションが作成されている状態になります。

モーションの新規作成は場面及びモデル両方に適用される点にご注意ください。

2. モーションを読み込む方法
---------------------------

方法は適用先がモデルか場面かによって方法によって分かれます。モデル及びカメラ両方共読み込む前に変更点がある場合「変更しますか」のダイアログが出ます。モーションのファイルを指定せずキャンセルした場合は読み込まれません。

### 2.1 モデルにモーションを適用する方法

以下の５つあります。いずれもあらかじめモデルを選択する必要があります。また、モデルを選択しないままモーションの追加を行おうとすると警告ダイアログが表示されます。

 * 1. ツールバーの「モデル/モーション追加」でファイルの種類を「モデルモーションファイル」にしてファイルを指定する
 * 2. ウィンドウ上部の「モーションを追加」からモーションのファイルを指定する
 * 3. メニューから「ファイル」の「モーションを選択されたモデルに追加」からモーションのファイルを指定する
 * 4. 右側の描画ウィンドウを右クリックし、「モーションを選択されたモデルに追加」からモーションのファイルを指定する
 * 5. アプリケーションのウィンドウにモーションのファイルに直接ドラッグ・アンド・ドロップする

モデルの場合モーションデータ内にある適用先モデルと選択したモデルが違う場合は警告ダイアログ表示を出します。「はい」で強制的にモーションを読みこませることが出来ます。

### 2.2 カメラモーションを適用する方法

カメラの場合はメニューの「ファイル」の「カメラモーションの設定」でモーションのファイルを指定すると場面のカメラモーションが適用されます。ただし、カメラのキーフレームがひとつもないと読み込まれません。
 
3. モーションを保存する方法
---------------------------

モーションはプロジェクトと異なり、モデルとカメラで別々に分けて VMD 形式または MVD 形式として出力します。現状照明の出力は対応していません。u

### 3.1 モデルのモーションとして保存する

モデルのモーションとして保存するには以下の２つの方法があります。

 * 1. メニューから「ファイル」の「モデルモーションを保存」で保存
 * 2. メニューから「ファイル」の「モデルモーションを別名で保存」で保存
 
前者は前回のファイル名で、後者はダイアログが開いて新しいファイル名を指定して保存します。もし「モデルモーションを保存」で前回のファイル名がない場合は「モデルモーションを別名で保存」と同じです。

保存時ファイのダイアログが開くので、ファイル名を指定します。指定後、全てのボーンとモーフのキーフレームが出力され、拡張子が VMD なら VMD として、拡張子が MVD なら MVD として保存されます。

### 3.2 カメラのモーションとして保存する

カメラに対して適用されるモーションの場合はメニューの「カメラモーションを別名で保存」で保存できます。保存時ファイルのダイアログが開くので、ファイル名を指定します。指定後、全てのカメラのキーフレームが出力され、拡張子が VMD なら VMD として、拡張子が MVD なら MVD として保存されます。それ以外のキーフレームは含まれません。

