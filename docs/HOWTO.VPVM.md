VPVM の使い方ガイド
=================

VPVM (a.k.a MMDAI2、以下 VPVM) は MikuMikuDance (以下 MMD) 互換のモーションを作成または編集するために作られたアプリケーションです。MMD のモデル及びモーションを読み込むことが可能です。本家 MMD と UI をあわせたところがありますが、操作体系が大きく異なります。

# 目的別インデックス
  - VPVM の UI
    - タイムライン
      - ボーン
      - 表情
    - タブパネル
      - アクセサリ
      - カメラ
      - 表情
      - 補間
  - 場面を操作する
  - モデルを読み込む
    - モデルを選択する
  - アクセサリを読み込む
  - モーションを読み込む
  - ポーズを読み込む
  - ポーズを書きだす
  - モーションを書きだす
  - 静止画として出力する
  - 動画として出力する
  - メニュー

# VPVM の UI
VPVM の UI は大きく3つの要素で構成されます。また、メニューのビューから表示可能な変形ビューがあります。

## タイムライン
VPVM の左上にあり、「ボーン」と「表情」のタブが表示されている部分です。ここではモデルごとにモーションをフレーム単位で管理され、「フレームの位置」の値を変えることによって特定のフレームの場面が反映されます。

タイムラインはモデル単位で、ボーンと表情それぞれ別に管理します。また、ボーンと表情のアニメーションは最大 54000 フレーム、30分のモーションを管理することが可能です。

### ボーン
モーションのうちボーンのアニメーションを管理するものです。ここではモデルの中に含まれるボーンのカテゴリ毎に区分けされ、クリックするとそのカテゴリに属するボーンのフレーム情報を見ることが可能です。黒いダイヤモンド形状のマークはそのボーンに登録されたフレームを指します。

### 表情
モーションのうち表情(頂点モーフ)のアニメーションを管理するものです。ここでは「眉毛」、「目」、「口唇」、「その他」の固定された4つのカテゴリに区分され、クリックするとそのカテゴリに属する表情のフレーム情報を見ることが可能です。黒いダイヤモンド形状のマークはボーンと同じくその表情に登録されたフレームを指します。

## タブパネル
VPVM の左下にあり、「アクセサリ」、「カメラ」、「表情」、「補間」のタブがある部分です。

### アクセサリ
追加されたアクセサリを管理する部分です。プルダウンリストをクリックして選択することによってアクセサリを切り替えることが可能です。
  - 「削除」は選択されたアクセサリを削除する機能です。アクセサリを削除すると場面に存在する当該のアクセサリも同時に削除されます。
  - 「位置」はアクセサリの位置を設定します。ここでは X/Y/Z 軸それぞれの値を変更することが可能です。最大10000、最小 -10000 の範囲で設定することが可能です。
  - 「回転」はアクセサリの回転を設定します。ここでは X/Y/Z 軸を度単位で変更することが可能です。最大180度、最小 -180度の範囲で設定することが可能です。
  - 「拡大率」はアクセサリの拡大率を設定します。アクセサリを読み込むと MMD と合わせるために10倍に設定されます。最小0.01倍、最大10000倍の範囲で設定することが可能です。
  - 「不透明度」はアクセサリの不透明度を設定します。1にすると完全に表示された状態に、0にすると完全に透明になった状態になります。0から1の範囲で設定することが可能です。

### カメラ
カメラの視点を管理する部分です。「前面」、「背面」、「トップ」、「左」、「右」、「カメラ」のボタンが用意され、押すとカメラの視点がそれぞれのボタンの名前に合わせた方向に自動的に設定されます。現在「カメラ」のみ未実装のため、押しても何も効果がありません。

### 表情
表情を管理する部分です。モデルを選択しないと何も表示されません。「目」、「口唇」、「眉毛」、「その他」に区分され、スライダーをずらすとプルダウンに表示されている表情を変更することが可能です。「登録」をクリックすることによって変更した情報を現在のフレームに登録します。
「登録」をクリックせず別のフレームに移動すると変更した情報が失われるため、モーションに変更した表情を残したい場合は必ず「登録」をクリックしてください。

### 補間
ボーンのフレームとフレームの間の動きの補間を管理する部分です。ここはまだ現在未実装のため、操作することが出来ません。

## 場面(シーン)
VPVM の右側に大きく表示されている部分です。モデルやアクセサリはここに表示されます。また、タイムラインでフレームの位置を変更すると現在のフレームの情報に基づいてモデルの動きが反映されます。

左上の "Model" は現在選択されているモデルの名前を表示します。選択されていない場合は「なし」になります。"Bone" は現在選択されているぼーんの名前を表示します。選択されていない場合は「なし」になります。

右下の XYZ のアイコンはボーンを操作するためのハンドルです。XYZ がそれぞれ赤緑青に色付けされている場合は操作可能を、灰色になっている場合は操作不可を指します。上の XYZ はボーンの回転を、下の XYZ はボーンの移動を担当し、マウスでアイコンをクリックし、縦方向に移動させることによってボーンを動かすことが可能です。

# 場面を操作する
メニューの「場面」からか、またはマウスで場面をクリックしてドラッグ操作することによって可能になります。
  - 場面をドラッグすると場面のカメラ視点の回転が行われます。これはメニューの「場面」の「～を回転」が該当します。
  - SHIFT 押しながらドラッグすると場面のカメラ視点の移動が行われます。これはメニューの「場面」の「～を移動」が該当します。
マウスのホイールを前に回すと場面のカメラ視点の拡大が行われます。これはメニューの「場面」の「拡大」が該当します。
  -  マウスのホイールを後ろに回すと場面のカメラ視点の縮小が行われます。これはメニューの「場面」の「縮小」が該当します。
  - 場面のカメラ視点を最初の状態に戻すにはメニューの「場面」の「カメラ視点をリセット」を行います。

# モデルを読み込む
VPVM は MMD のモデルのうち拡張子が PMD とつくファイルを読み込むことが可能です。拡張形式である PMX を読み込むことが出来ません。

1. 「ファイル」を選択
2. 「モデルを追加」を選択
3.  拡張子が PMD 形式のファイルを選択

モデルが読み込まれるとそのモデルがデフォルトで選択状態になります。モデルが選択された状態かどうかを確認するにはモデルの周囲が赤くなっているかどうかを確認してください。

## モデルを選択する

1. 「モデル」を選択
2. 「モデルを選択」を選択
3.  選択したいモデルの名前をクリックする

選択状態のモデルは周囲が赤くなります。

# アクセサリを読み込む
VPVM は MMD のアクセサリとして使われる DirectX で用いられる X 形式のファイルを読みことが可能です。

1. 「ファイル」を選択
2. 「アクセサリを追加」を選択
3.  拡張子が X 形式のファイルを選択

アクセサリは MMD とあわせるために拡大率が10倍の状態で表示されます。

# モーションを読み込む
VPVM は MMD のモーションである拡張子が VMD とつくファイルを読み込むことが可能です。モデルが予め選択された状態である必要があります。選択されていない場合警告ダイアログが表示されます。

1. 「モデルを選択する」の方法に基づいてモーションを読み込ませたいモデルを選択
2. 「ファイル」を選択
3. 「モーションを選択されたモデルに追加」を選択
4.  拡張子が VMD 形式のファイルを選択

# ポーズを読み込む
VPVM は MMD のポーズファイルである拡張子が VPD とつくファイルを読み込むことが可能です。モデルが予め選択された状態である必要があります。読み込まれると現在のキーフレームに対して自動的に登録されます。

1. 「モデルを選択する」の方法に基づいてポーズを読み込ませたいモデルを選択
2.  ポーズを読み込ませたいキーフレームを指定
3. 「ファイル」を選択
4. 「モデルのポーズの読み込み」を選択
5.  拡張子が VPD 形式のファイルを選択

# ポーズを書きだす
VPVM は現在のキーフレームに対してポーズファイルとして書きだすことが可能です。書き出し対象は現時点でボーンのみで、表情の情報が書き出されません。

1. 「モデルを選択する」の方法に基づいてポーズを書き出したいモデルを選択
2.  ポーズを書き出すためのキーフレームを指定
3. 「ファイル」を選択
4. 「モデルのポーズの保存」を選択
5. ファイル名と拡張子 VPD をつけて保存する

# モーションを書きだす
VPVM はすべてのキーフレームに対してモーションファイルとして書きだすことが可能です。MMD との相互可用性は現時点で確認していません。そのため、まだ混在して保存するべきではありません。

1. 「モデルを選択する」の方法に基づいてモーションを書き出したいモデルを選択
3. 「ファイル」を選択
4. 「モーションを VMD として保存」を選択
5. ファイル名と拡張子 VMD をつけて保存する

# 静止画として出力
VPVM は場面を静止画として書きだすことが可能です。保存可能な形式は BMP と JPG と PNG の3つです。拡張子を付けないと静止画が書き出されないため、必ず拡張子をつけて保存してください。

1. 「ファイル」を選択
2. 「場面を画像として出力」を選択
3. ファイル名と拡張子 JPG/PNG/BMP のいずれかを指定して保存する

# 動画として出力
VPVM は場面を動画として書きだすことが可能です(現状 MacOSX のみ)。その場合はまずモーションを作成するか、読み込む必要があります。その場合と動画出力機能に対応していない場合は警告ダイアログが表示されます。

# メニュー

